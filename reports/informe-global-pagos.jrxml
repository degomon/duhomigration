<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="informe-global-pagos" language="groovy" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="58aa2f56-0490-400b-91bf-c4698099f956">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="Crosstab Data Text" hAlign="Center"/>
	<parameter name="fechainicial" class="java.util.Date"/>
	<parameter name="fechafinal" class="java.util.Date"/>
	<queryString>
		<![CDATA[select
org.ad_org_id,
org.name sucursal,
ch.c_charge_id,
ch.name as cargo,
sum(pay.payamt) as monto,
round(sum(pay.payamt) / 35, 2) as montousd
from c_charge ch
inner join c_chargetype cht on ch.c_chargetype_id = cht.c_chargetype_id
inner join c_payment pay on ch.c_charge_id = pay.c_charge_id
inner join ad_org org on pay.ad_org_id = org.ad_org_id
where pay.dateacct::date between $P{fechainicial}::date and $P{fechafinal}::date
-- and org.ad_org_id = 1000014
and not cht.name ~* 'cartera'
and not cht.name ~* 'cajas'
group by org.ad_org_id, org.name, ch.c_charge_id, ch.name
order by org.name, ch.name
-- select * from ad_org]]>
	</queryString>
	<field name="ad_org_id" class="java.math.BigDecimal"/>
	<field name="sucursal" class="java.lang.String"/>
	<field name="c_charge_id" class="java.math.BigDecimal"/>
	<field name="cargo" class="java.lang.String"/>
	<field name="monto" class="java.math.BigDecimal"/>
	<field name="montousd" class="java.math.BigDecimal"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="41" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="802" height="20" uuid="e278657c-1fbd-4011-b9bf-06d1844defb4"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[INFORME GLOBAL DE PAGOS (GASTOS)]]></text>
			</staticText>
			<textField>
				<reportElement x="0" y="20" width="802" height="20" uuid="10afc4e7-7620-4005-9c5d-ed652459fb10"/>
				<textElement verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["MOVIMIENTOS DESDE EL "
+ ( new SimpleDateFormat("dd/MM/YYY").format($P{fechainicial}))
+ " HASTA "
+ ( new SimpleDateFormat("dd/MM/YYY").format( $P{fechafinal} ))]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<detail>
		<band splitType="Stretch"/>
	</detail>
	<summary>
		<band height="184" splitType="Stretch">
			<crosstab>
				<reportElement x="0" y="0" width="802" height="184" uuid="b8ee5570-9c0e-4cb6-89bd-000678e68c55"/>
				<rowGroup name="cargo" width="70" totalPosition="End">
					<bucket class="java.lang.String">
						<bucketExpression><![CDATA[$F{cargo}]]></bucketExpression>
					</bucket>
					<crosstabRowHeader>
						<cellContents backcolor="#F0F8FF" mode="Opaque">
							<box>
								<pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
							</box>
							<textField>
								<reportElement style="Crosstab Data Text" x="0" y="0" width="70" height="10" uuid="2606119f-af5c-4d06-bdac-84441adf3e71"/>
								<textElement verticalAlignment="Middle">
									<font size="5"/>
								</textElement>
								<textFieldExpression><![CDATA[$V{cargo}]]></textFieldExpression>
							</textField>
						</cellContents>
					</crosstabRowHeader>
					<crosstabTotalRowHeader>
						<cellContents backcolor="#BFE1FF" mode="Opaque">
							<box>
								<pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
							</box>
							<staticText>
								<reportElement x="0" y="0" width="70" height="25" uuid="3b25910f-d80f-4d81-9125-bc4700b3ff00"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="5"/>
								</textElement>
								<text><![CDATA[Total cargo]]></text>
							</staticText>
						</cellContents>
					</crosstabTotalRowHeader>
				</rowGroup>
				<columnGroup name="sucursal" height="30" totalPosition="End">
					<bucket class="java.lang.String">
						<bucketExpression><![CDATA[$F{sucursal}]]></bucketExpression>
					</bucket>
					<crosstabColumnHeader>
						<cellContents backcolor="#F0F8FF" mode="Opaque">
							<box>
								<pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
							</box>
							<textField>
								<reportElement style="Crosstab Data Text" x="0" y="0" width="35" height="30" uuid="787c9b03-2884-4058-ae43-300348b37cd4"/>
								<textElement verticalAlignment="Middle">
									<font size="5"/>
								</textElement>
								<textFieldExpression><![CDATA[$V{sucursal}]]></textFieldExpression>
							</textField>
						</cellContents>
					</crosstabColumnHeader>
					<crosstabTotalColumnHeader>
						<cellContents backcolor="#BFE1FF" mode="Opaque">
							<box>
								<pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
							</box>
							<staticText>
								<reportElement x="0" y="0" width="50" height="30" uuid="a949e90c-ee3e-4cd9-aa6d-5e0d4f4497d8"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="5"/>
								</textElement>
								<text><![CDATA[Total sucursal]]></text>
							</staticText>
						</cellContents>
					</crosstabTotalColumnHeader>
				</columnGroup>
				<measure name="montoMeasure" class="java.math.BigDecimal" calculation="Sum">
					<measureExpression><![CDATA[$F{monto}]]></measureExpression>
				</measure>
				<crosstabCell width="35" height="10">
					<cellContents>
						<box>
							<pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textField pattern="#,##0.00;-#,##0.00">
							<reportElement style="Crosstab Data Text" x="0" y="0" width="35" height="10" uuid="ace13e64-a779-4fc6-b733-65d6db8e44b3"/>
							<box rightPadding="2"/>
							<textElement textAlignment="Right" verticalAlignment="Middle">
								<font size="5"/>
							</textElement>
							<textFieldExpression><![CDATA[$V{montoMeasure}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
				<crosstabCell width="35" height="25" rowTotalGroup="cargo">
					<cellContents backcolor="#BFE1FF" mode="Opaque">
						<box>
							<pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textField pattern="#,##0.00;-#,##0.00">
							<reportElement style="Crosstab Data Text" x="0" y="0" width="35" height="25" uuid="c993c91b-0beb-4800-8a09-0c8274c1427e"/>
							<box rightPadding="2"/>
							<textElement textAlignment="Right" verticalAlignment="Middle">
								<font size="5"/>
							</textElement>
							<textFieldExpression><![CDATA[$V{montoMeasure}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
				<crosstabCell width="50" height="10" columnTotalGroup="sucursal">
					<cellContents backcolor="#BFE1FF" mode="Opaque">
						<box>
							<pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textField pattern="#,##0.00;-#,##0.00">
							<reportElement style="Crosstab Data Text" x="0" y="0" width="50" height="10" uuid="41b692a6-2c14-4854-88c5-50a7537dc5ef"/>
							<box rightPadding="2"/>
							<textElement textAlignment="Right" verticalAlignment="Middle">
								<font size="5"/>
							</textElement>
							<textFieldExpression><![CDATA[$V{montoMeasure}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
				<crosstabCell height="25" rowTotalGroup="cargo" columnTotalGroup="sucursal">
					<cellContents backcolor="#BFE1FF" mode="Opaque">
						<box>
							<pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textField pattern="#,##0.00;-#,##0.00">
							<reportElement style="Crosstab Data Text" x="0" y="0" width="50" height="25" uuid="4be814ee-d672-4748-82df-f3ad518344e7"/>
							<box rightPadding="2"/>
							<textElement textAlignment="Right" verticalAlignment="Middle">
								<font size="5"/>
							</textElement>
							<textFieldExpression><![CDATA[$V{montoMeasure}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
			</crosstab>
		</band>
	</summary>
</jasperReport>
